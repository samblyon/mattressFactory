{"version":3,"sources":["webpack:///webpack/bootstrap e97e23ff5c73b6164d43","webpack:///./js/main.js","webpack:///./js/game.js","webpack:///./js/game_view.js","webpack:///./js/map.js","webpack:///./js/coord.js","webpack:///./js/util.js","webpack:///./js/ray.js","webpack:///./js/wall.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;;;ACfD;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACNA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;ACpCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAA+C;AAC/C;AACA;;AAEA;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACjBA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;;AAEA,gCAA+B;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA2B,iCAAiC,qBAAqB;AACjF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e97e23ff5c73b6164d43\n **/","const Game = require('./game.js');\nconst GameView = require('./game_view.js');\n\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n  console.log(\"Hey there\");\n  const canvas = document.getElementById('canvas');\n  canvas.width = 400;\n  canvas.height = 400;\n\n  const ctx = canvas.getContext(\"2d\");\n  ctx.fillStyle = \"#222\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  const map = new Map();\n  window.GameView = new GameView(canvas, map);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","class Game {\n  constructor(){\n    // this.grid =\n  }\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 1\n ** module chunks = 0\n **/","const Map = require('./map');\n\nclass GameView {\n  constructor(canvas, map){\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    this.map = new Map(canvas);\n  }\n\n  bindKeyHandlers() {}\n\n  start(){\n    //bind key handlers\n\n    //start animation\n    requestAnimationFrame(this.step.bind(this));\n  }\n\n  step () {\n    this.ctx.fillStyle = \"#222\";\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.map.step();\n    this.map.draw(this.ctx);\n\n    //request another animation\n    requestAnimationFrame(this.step.bind(this));\n\n    // when game is over\n    // window.clearInterval(this.intervalId);\n  }\n\n};\n\nGameView.MOVES = {}\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game_view.js\n ** module id = 2\n ** module chunks = 0\n **/","const Coord = require('./coord');\nconst Ray = require('./ray');\nconst Util = require('./util');\nconst Wall = require('./wall');\n\nclass Map {\n  constructor(canvas){\n    const pegCoord = new Coord(3, 3);\n    const dirCoord = new Coord(1, 2);\n    const testRay = new Ray(pegCoord, dirCoord, this);\n    window.rays = this.rays = [ testRay ];\n    // const testWall = new Wall(10, 10, 20, 100);\n    const testWall2 = new Wall(50, 200, 200, 210);\n    window.walls = this.walls = [ testWall2 ];\n    this.canvas = canvas;\n  }\n\n  collidingWithWall(coord){\n    return this.walls.some( wall => {\n      return !(\n        (coord.x < wall.topLeft.x)\n          || (coord.x > wall.bottomRight.x)\n          || (coord.y < wall.topLeft.y)\n          || (coord.y > wall.bottomRight.y)\n      );\n    });\n  }\n\n  cullRays(){\n    this.rays = this.rays.filter(ray => {\n      return ray.age < Ray.LIFESPAN;\n    });\n  }\n\n  moveRays(){\n    for (let ray of this.rays) {\n      ray.move();\n    }\n  }\n\n  step(){\n    this.cullRays();\n    this.moveRays();\n  }\n\n  draw(ctx){\n    this.rays.forEach(ray => ray.draw(ctx));\n    this.walls.forEach(wall => wall.draw(ctx)); //remove this on release\n  }\n};\n\nmodule.exports = Map;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/map.js\n ** module id = 3\n ** module chunks = 0\n **/","class Coord {\n  constructor(x, y){\n    this.x = x;\n    this.y = y;\n  }\n\n  equals(otherCoord){\n    return (this.x === otherCoord.x)\n      && (this.y === otherCoord.y)\n  }\n\n  getAdjacentCoords(){\n    return Coord.MOVES.map(move => {\n      const newX = this.x + move[0];\n      const newY = this.y + move[1];\n      return new Coord(newX, newY);\n    });\n  }\n}\n\nCoord.MOVES = [\n  [0, 1],\n  [0, -1],\n  [1, 0],\n  [-1, 0],\n  [1, 1],\n  [1, -1],\n  [-1, 1],\n  [-1, -1]\n];\n\nmodule.exports = Coord;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/coord.js\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = {\n  inherits(Child, Parent) {\n    function Surrogate (){};\n    Surrogate.prototype = Parent.prototype;\n    Child.prototype = new Surrogate();\n    Child.prototype.constructor = Child;\n  },\n\n  // inBounds(coord) {\n  //   return (coord.y >= 0) && (coord.y < this.grid.length)\n  //   && (coord.x >= 0) && (coord.x < this.grid[0].length);\n  // }\n\n  // isWall(coord) {\n  //   return (this.grid[coord.y][coord.x] === \"X\");\n  // }\n\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/util.js\n ** module id = 6\n ** module chunks = 0\n **/","const Coord = require('./coord');\n\nclass Ray {\n  constructor(origin, direction, map){\n    this.body = [origin];  //origin is coord object\n    this.head = origin;\n    this.tail = origin;\n    this.map = map;\n\n    this.direction = direction; //direction is coord object\n    this.speed = Ray.VELOCITY;\n\n    this.age = 0;\n    this.fading = false;\n  }\n\n  move(){\n    if (this.age < (Ray.LIFESPAN - 60)) {\n      this.handleCollisions();\n      this.growHead();\n    }\n\n    if (this.body.length > Ray.MAX_LENGTH){\n      this.fading = true;\n    }\n\n    if (this.fading) {\n      this.fadeTail()\n    }\n\n    this.age += 1;\n  }\n\n  // move head x and ask map if collided with wall\n  // move head y and ask map if collided with wall\n  // alter this.direction coord to reflect one or both bounces as needed\n  handleCollisions(){\n    const newX = this.head.x + (this.direction.x * this.speed);\n    const xExplorer = new Coord(newX, this.head.y);\n    const xCollision = this.map.collidingWithWall(xExplorer);\n\n    const newY = this.head.y + (this.direction.y * this.speed);\n    const yExplorer = new Coord(this.head.x, newY);\n    const yCollision = this.map.collidingWithWall(yExplorer);\n\n    if (xCollision || yCollision) {\n      this.direction.x = 0;    // NOTE do -this.direction.x; //-this.direction.y; later\n      this.direction.y = 0;\n    }\n  }\n\n  growHead(){\n    const newX = this.head.x + (this.direction.x * this.speed);\n    const newY = this.head.y + (this.direction.y * this.speed);\n    this.head = new Coord(newX, newY);\n    this.body.push(this.head); // collision logic could be added before this push\n  }\n\n  fadeTail(){\n    let i = 0;\n    while (i < Ray.VELOCITY) {\n      this.body.shift();\n      i += 1;\n    }\n    this.tail = this.body[0];\n  }\n\n  bounce(){\n\n    // this.direction x or y should invert depending on nature of collision\n  }\n\n  draw(ctx){\n    if (this.body.length === 0) return;\n\n    ctx.lineWidth = Ray.THICKNESS;\n\n    // linear gradient from start to end of line\n    const grad = ctx.createLinearGradient(\n      this.head.x, this.head.y,\n      this.tail.x, this.tail.y\n    );\n    grad.addColorStop(0, Ray.HEAD_COLOR);\n    grad.addColorStop(1, Ray.TAIL_COLOR);\n\n    ctx.strokeStyle = grad;\n\n    ctx.beginPath();\n    ctx.moveTo(this.head.x, this.head.y);\n    ctx.lineTo(this.tail.x, this.tail.y);\n\n    ctx.stroke();\n  }\n};\n\nRay.MAX_LENGTH = 40;\nRay.HEAD_COLOR = \"#fff\";\nRay.TAIL_COLOR = \"#222\";\nRay.VELOCITY = 1;\nRay.LIFESPAN = 200;\nRay.THICKNESS = 1;\n\nmodule.exports = Ray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/ray.js\n ** module id = 7\n ** module chunks = 0\n **/","const Coord = require('./coord');\n\nclass Wall {\n  constructor(topX, topY, bottomX, bottomY){\n    this.topLeft = new Coord(topX, topY);\n    this.bottomRight = new Coord(bottomX, bottomY);\n    this.width = bottomX - topX;\n    this.height = bottomY - topY;\n  }\n\n  draw(ctx){\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(this.topLeft.x, this.topLeft.y, this.width, this.height);\n  }\n}\n\nmodule.exports = Wall;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/wall.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}